<details @key="Host.Name">
    <summary>
        @Host.Name

        @Actions

        @if (Host.IsLoading)
        {
            <span>loading</span>
        }
    </summary>


    @if (Host.AllCatalogs != null)
    {
        foreach (var catalog in Host.AllCatalogs)
        {
            <div>
                @catalog.Name
            </div>
        }
    }
    else if (Host.Error != null)
    {
        @Host.Error
    }
</details>

<RerenderHelper Observable="Host" OnChange="StateHasChanged" />

@code {
    [Parameter]
    public LiveSqlServerHost Host { get; set; }

    [Parameter]
    public RenderFragment Actions { get; set; }

    protected override void OnParametersSet()
    {
        Host.Refresh().Ignore();
    }
}
